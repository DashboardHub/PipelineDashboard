language: php

php:
  - 5.5

before_script:
  - curl -s http://getcomposer.org/installer | php
  - php composer.phar install --dev --no-interaction
  - make symfony.dev.rebuild

script:
  - make symfony.test.bdd suite=quickstart_app config=test/behat.yml
  - make symfony.test.unit suite=app
  - make symfony.test.spec config=test/phpspec.yml
  - make scrutinizer.coverage

after_success:
  - make build.package

after_failure:
  - make symfony.logs

branches:
  except:
    - /^build-[0-9a-z\-\/]*/
    - /^spike[0-9a-z\-\/]*/

